<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.1.251">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Dynamic optimization of human walking speeds</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1.6em;
  vertical-align: middle;
}
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
}
.hanging div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}
</style>


<script src="shortwalks_files/libs/clipboard/clipboard.min.js"></script>
<script src="shortwalks_files/libs/quarto-html/quarto.js"></script>
<script src="shortwalks_files/libs/quarto-html/popper.min.js"></script>
<script src="shortwalks_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="shortwalks_files/libs/quarto-html/anchor.min.js"></script>
<link href="shortwalks_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="shortwalks_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="shortwalks_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="shortwalks_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="shortwalks_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">

  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

</head>

<body class="fullcontent">

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">

<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Dynamic optimization of human walking speeds</h1>
</div>



<div class="quarto-title-meta">

    
    
  </div>
  

</header>

<section id="optimization-of-energy-and-time-predicts-dynamic-speeds-for-human-walking-carlisle2022optimizationenergytime" class="level2">
<h2 class="anchored" data-anchor-id="optimization-of-energy-and-time-predicts-dynamic-speeds-for-human-walking-carlisle2022optimizationenergytime">Optimization of energy and time predicts dynamic speeds for human walking <span class="citation" data-cites="carlisle2022OptimizationEnergyTime">(<a href="#ref-carlisle2022OptimizationEnergyTime" role="doc-biblioref">Carlisle and Kuo 2022</a>)</span></h2>
<p>Take walks of varying distances, and show how the optimal trajectory has an inverted-U velocity profile, with peak speed that increases with distance up to about 12 steps, leveling off thereafter. The cost function is net mechanical work, plus a linear cost of time with coefficient ctime.</p>
<section id="go-for-a-single-walk" class="level3">
<h3 class="anchored" data-anchor-id="go-for-a-single-walk">Go for a single walk</h3>
<p>Take a walk of 10 steps, starting and ending at rest. Find the optimal push-offs that minimize total work. The optimization is performed with <code>optwalktime</code> which uses a time cost (relative to work) of <code>tchange</code>.</p>
<div class="cell" data-execution_count="1">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="im">using</span> <span class="bu">DynLoco</span>, <span class="bu">Plots; </span><span class="co">#plotlyjs()</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a>wstar4 <span class="op">=</span> <span class="fu">findgait</span>(<span class="fu">WalkRW2l</span>(α<span class="op">=</span><span class="fl">0.35</span>,safety<span class="op">=</span><span class="cn">true</span>), target<span class="op">=:</span>speed<span class="op">=&gt;</span><span class="fl">0.3</span>, varying<span class="op">=:</span>P)</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a>ctime <span class="op">=</span> <span class="fl">0.015</span> <span class="co"># cost of time, to encourage hurrying</span></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a>tchange <span class="op">=</span> <span class="fl">1.75</span> <span class="co"># boundary condition time to get up to speed (arbitrary, excluded from optimization) </span></span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a>p <span class="op">=</span> <span class="fu">plot</span>() </span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a>nsteps <span class="op">=</span> <span class="fl">10</span></span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a>result <span class="op">=</span> <span class="fu">optwalktime</span>(wstar4, nsteps, ctime<span class="op">=</span>ctime) <span class="co"># optimize work and time</span></span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a><span class="fu">multistepplot</span>(result) <span class="co"># plot speed, push-off, terrain trajectories</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display" data-execution_count="2">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="shortwalks_files/figure-html/cell-2-output-1.svg" class="img-fluid figure-img"></p>
<p></p><figcaption class="figure-caption">Speed vs time for a short walk. The mid-stance speeds, push-offs, and terrain heights are plotted vs discrete step number.</figcaption><p></p>
</figure>
</div>
</div>
</div>
<p>All quantities are plotted dimensionlessly, with base units of body mass <span class="math inline">\(M\)</span>, leg length <span class="math inline">\(L\)</span>, and gravitational acceleration <span class="math inline">\(g\)</span>. Thus speed is normalized by <span class="math inline">\(\sqrt(gL)\)</span> and time by <span class="math inline">\(\sqrt(L/g)\)</span>. For a typical leg length of <span class="math inline">\(L = 1 \mathrm{m}\)</span>, the dimensional speed is about 1.25 m/s, and step time about 0.55 s.</p>
</section>
<section id="go-for-walks-of-verying-distance" class="level3">
<h3 class="anchored" data-anchor-id="go-for-walks-of-verying-distance">Go for walks of verying distance</h3>
<div class="cell" data-execution_count="2">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>p <span class="op">=</span> <span class="fu">plot</span>() </span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>walksteps <span class="op">=</span> [<span class="fl">1</span>, <span class="fl">2</span>, <span class="fl">3</span>, <span class="fl">4</span>, <span class="fl">5</span>, <span class="fl">6</span>, <span class="fl">7</span>, <span class="fl">10</span>, <span class="fl">15</span>, <span class="fl">20</span>] <span class="co"># take walks of this # of steps</span></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>results <span class="op">=</span> <span class="fu">Array</span><span class="dt">{MultiStepResults,1}</span>(<span class="cn">undef</span>,<span class="fl">0</span>) <span class="co"># store each optimization result here</span></span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (i,nsteps) <span class="kw">in</span> <span class="fu">enumerate</span>(walksteps)</span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a>    result <span class="op">=</span> <span class="fu">optwalktime</span>(wstar4, nsteps, ctime<span class="op">=</span>ctime) <span class="co"># optimize with a cost of time</span></span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">plotvees!</span>(p, result, tchange<span class="op">=</span>tchange, usespline<span class="op">=</span><span class="cn">false</span>, color<span class="op">=</span>i, speedtype<span class="op">=:</span>shortwalks, rampuporder<span class="op">=</span><span class="fl">1</span>, markersize<span class="op">=</span><span class="fl">2</span>) <span class="co"># plot instantaneous body speed vs. time</span></span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a>    <span class="fu">push!</span>(results, result) <span class="co"># add this optimization to results array</span></span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a><span class="cf">end</span></span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a>Plots.<span class="fu">display</span>(p) <span class="co"># instantaneous speed vs. distance profiles</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="shortwalks_files/figure-html/cell-3-output-1.svg" class="img-fluid figure-img"></p>
<p></p><figcaption class="figure-caption">Speed vs time for short walks; each trace is a different bout distance</figcaption><p></p>
</figure>
</div>
</div>
</div>
<p>Here the speeds are plotted as “body speed” each step, to match IMU. Model is parameterized by mid-stance speed each step, but IMU data only yields strides. As described by <span class="citation" data-cites="carlisle2022OptimizationEnergyTime">Carlisle and Kuo (<a href="#ref-carlisle2022OptimizationEnergyTime" role="doc-biblioref">2022</a>)</span>, we use estimated mid-stance times to estimate body speed.</p>
</section>
</section>
<section id="compare-three-objectives-energy-time-min-cot-constant-acceleration" class="level2">
<h2 class="anchored" data-anchor-id="compare-three-objectives-energy-time-min-cot-constant-acceleration">Compare three objectives: Energy-Time, min-COT, constant acceleration</h2>
<p>Walk a fixed number of steps, starting and ending at rest. The objectives are:</p>
<ul>
<li><strong>Energy-Time</strong> minimizes total energy (positive work) plus proportional time cost</li>
<li><strong>min-COT</strong> walks at a constant speed that minimizes cost of transport (energy per weight and distance traveled), with a trapezoidal speed profile. This is achieved by minimizing deviation from minCOT speed, to allow model to accelerate to that speed.</li>
<li><strong>Constant accel</strong> accelerates at a constant rate, to yield a triangular speed profile. Uses a minimum variance objective to produce a constant rate of velocity change.</li>
</ul>
<p>Compare for a fixed number of steps.</p>
<div class="cell" data-execution_count="3">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="co"># A minCOT nominal gait</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>wstar4n <span class="op">=</span> <span class="fu">findgait</span>(<span class="fu">WalkRW2l</span>(α<span class="op">=</span><span class="fl">0.35</span>, safety<span class="op">=</span><span class="cn">true</span>), target<span class="op">=:</span>speed<span class="op">=&gt;</span><span class="fl">0.4</span>, varying<span class="op">=:</span>P) <span class="co"># use a speed of 0.4 to match minCOT</span></span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>nsteps <span class="op">=</span> <span class="fl">10</span></span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a>ctime <span class="op">=</span> <span class="fl">0.0195</span></span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a>tchange <span class="op">=</span> <span class="fl">1.75</span></span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a>nominalresult<span class="op">=</span><span class="fu">optwalktime</span>(wstar4n, nsteps, ctime <span class="op">=</span> ctime, boundarywork<span class="op">=</span><span class="cn">true</span>) <span class="co"># to compare with our usual solution</span></span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a><span class="co"># minCOT walk. optwalkvar minimizes variance from nominal</span></span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true" tabindex="-1"></a>minvarresult<span class="op">=</span><span class="fu">optwalkvar</span>(wstar4n, nsteps, boundarywork<span class="op">=</span><span class="cn">true</span>)</span>
<span id="cb3-10"><a href="#cb3-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-11"><a href="#cb3-11" aria-hidden="true" tabindex="-1"></a><span class="co"># steady acceleration walk, which tries to maintain same</span></span>
<span id="cb3-12"><a href="#cb3-12" aria-hidden="true" tabindex="-1"></a><span class="co"># acceleration each step, resulting in a triangular speed</span></span>
<span id="cb3-13"><a href="#cb3-13" aria-hidden="true" tabindex="-1"></a><span class="co"># profile</span></span>
<span id="cb3-14"><a href="#cb3-14" aria-hidden="true" tabindex="-1"></a>A <span class="op">=</span> <span class="fl">0.0655</span> <span class="co"># 1.9*wstar4n.vm/(nsteps*onestep(wstar4n).tf) # acceleration</span></span>
<span id="cb3-15"><a href="#cb3-15" aria-hidden="true" tabindex="-1"></a>v0 <span class="op">=</span> <span class="fl">0.11</span> <span class="co"># 0.8*A*tchange # a couple acceleration constants</span></span>
<span id="cb3-16"><a href="#cb3-16" aria-hidden="true" tabindex="-1"></a><span class="co"># chosen by hand to allow smooth transition from initiation</span></span>
<span id="cb3-17"><a href="#cb3-17" aria-hidden="true" tabindex="-1"></a><span class="co"># to push-off.</span></span>
<span id="cb3-18"><a href="#cb3-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-19"><a href="#cb3-19" aria-hidden="true" tabindex="-1"></a>constaccelresult <span class="op">=</span> <span class="fu">optwalktriangle</span>(wstar4n, nsteps, A <span class="op">=</span> A, boundarywork<span class="op">=</span><span class="cn">false</span>,boundaryvels<span class="op">=</span>(v0,v0))</span>
<span id="cb3-20"><a href="#cb3-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-21"><a href="#cb3-21" aria-hidden="true" tabindex="-1"></a><span class="co"># Make the plots</span></span>
<span id="cb3-22"><a href="#cb3-22" aria-hidden="true" tabindex="-1"></a>p <span class="op">=</span> <span class="fu">plot</span>(layout<span class="op">=</span>(<span class="fl">1</span>,<span class="fl">2</span>))</span>
<span id="cb3-23"><a href="#cb3-23" aria-hidden="true" tabindex="-1"></a><span class="fu">plotvees!</span>(p[<span class="fl">1</span>],nominalresult, tchange<span class="op">=</span>tchange, rampuporder<span class="op">=</span><span class="fl">1</span>, usespline <span class="op">=</span> <span class="cn">false</span>, markershape<span class="op">=:</span>circle,speedtype<span class="op">=:</span>shortwalks)</span>
<span id="cb3-24"><a href="#cb3-24" aria-hidden="true" tabindex="-1"></a><span class="fu">plotvees!</span>(p[<span class="fl">1</span>],minvarresult, tchange<span class="op">=</span>tchange, rampuporder<span class="op">=</span><span class="fl">1</span>, usespline <span class="op">=</span> <span class="cn">false</span>,markershape<span class="op">=:</span>circle, speedtype<span class="op">=:</span>shortwalks)</span>
<span id="cb3-25"><a href="#cb3-25" aria-hidden="true" tabindex="-1"></a><span class="fu">plotvees!</span>(p[<span class="fl">1</span>],constaccelresult, tchange<span class="op">=</span>tchange, rampuporder<span class="op">=</span><span class="fl">1</span>, usespline <span class="op">=</span> <span class="cn">false</span>,markershape<span class="op">=:</span>circle, speedtype<span class="op">=:</span>shortwalks, seriescolor<span class="op">=:</span>auto)</span>
<span id="cb3-26"><a href="#cb3-26" aria-hidden="true" tabindex="-1"></a><span class="fu">plot!</span>(p[<span class="fl">2</span>],[<span class="fl">0</span><span class="op">:</span>nsteps<span class="op">+</span><span class="fl">1</span>], [<span class="fl">1</span><span class="op">/</span><span class="fl">2</span><span class="op">*</span>nominalresult.vm0<span class="op">^</span><span class="fl">2</span>; nominalresult.steps.Pwork; <span class="cn">NaN</span>],markershape<span class="op">=:</span>circle,seriescolor<span class="op">=:</span>auto)</span>
<span id="cb3-27"><a href="#cb3-27" aria-hidden="true" tabindex="-1"></a><span class="fu">plot!</span>(p[<span class="fl">2</span>],[<span class="fl">0</span><span class="op">:</span>nsteps<span class="op">+</span><span class="fl">1</span>], [<span class="fl">1</span><span class="op">/</span><span class="fl">2</span><span class="op">*</span>minvarresult.vm0<span class="op">^</span><span class="fl">2</span>; minvarresult.steps.Pwork; <span class="cn">NaN</span>],markershape<span class="op">=:</span>circle,xticks<span class="op">=</span><span class="fl">0</span><span class="op">:</span>nsteps<span class="op">+</span><span class="fl">1</span>)</span>
<span id="cb3-28"><a href="#cb3-28" aria-hidden="true" tabindex="-1"></a><span class="fu">plot!</span>(p[<span class="fl">2</span>],[<span class="fl">0</span><span class="op">:</span>nsteps<span class="op">+</span><span class="fl">1</span>], [<span class="fl">1</span><span class="op">/</span><span class="fl">2</span><span class="op">*</span>constaccelresult.vm0<span class="op">^</span><span class="fl">2</span>; constaccelresult.steps.Pwork; <span class="cn">NaN</span>],markershape<span class="op">=:</span>circle,xticks<span class="op">=</span><span class="fl">0</span><span class="op">:</span>nsteps<span class="op">+</span><span class="fl">1</span>,seriescolor<span class="op">=:</span>auto)</span>
<span id="cb3-29"><a href="#cb3-29" aria-hidden="true" tabindex="-1"></a><span class="fu">plot!</span>(p[<span class="fl">2</span>],xlabel<span class="op">=</span><span class="st">"step"</span>, ylabel<span class="op">=</span><span class="st">"push-off work"</span>, legend<span class="op">=</span><span class="cn">false</span>)</span>
<span id="cb3-30"><a href="#cb3-30" aria-hidden="true" tabindex="-1"></a>energytimework <span class="op">=</span> <span class="fl">1</span><span class="op">/</span><span class="fl">2</span><span class="op">*</span>nominalresult.vm0<span class="op">^</span><span class="fl">2</span> <span class="op">+</span> <span class="fu">sum</span>(nominalresult.steps.Pwork)</span>
<span id="cb3-31"><a href="#cb3-31" aria-hidden="true" tabindex="-1"></a>mincotwork <span class="op">=</span> <span class="fl">1</span><span class="op">/</span><span class="fl">2</span><span class="op">*</span>minvarresult.vm0<span class="op">^</span><span class="fl">2</span> <span class="op">+</span> <span class="fu">sum</span>(minvarresult.steps.Pwork)</span>
<span id="cb3-32"><a href="#cb3-32" aria-hidden="true" tabindex="-1"></a>trianglework <span class="op">=</span> (<span class="fl">1</span><span class="op">/</span><span class="fl">2</span><span class="op">*</span>constaccelresult.vm0<span class="op">^</span><span class="fl">2</span> <span class="op">+</span> <span class="fu">sum</span>(constaccelresult.steps.Pwork))<span class="op">/</span>(<span class="fl">1</span><span class="op">/</span><span class="fl">2</span><span class="op">*</span>nominalresult.vm0<span class="op">^</span><span class="fl">2</span> <span class="op">+</span> <span class="fu">sum</span>(nominalresult.steps.Pwork))</span>
<span id="cb3-33"><a href="#cb3-33" aria-hidden="true" tabindex="-1"></a>Plots.<span class="fu">display</span>(p)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<p><img src="shortwalks_files/figure-html/cell-4-output-1.svg" class="img-fluid"></p>
</div>
</div>
<p>Quantify the three predictions. The energy cost for each walk consists of the positive work for gait initiation plus the positive push-off work for all steps. Negative work is ignored, because equal magnitudes of positive and negative work are performed for this task. If there are constant efficiencies for muscles to perform positive and negative work, the physiological cost of negative work is proportional to positive work. This affects the total metabolic cost, but does not affect the optimal solutions.</p>
<div class="cell" data-execution_count="4">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="im">using</span> <span class="bu">Markdown</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a> </span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>threecosts <span class="op">=</span> [<span class="fl">1</span><span class="op">/</span><span class="fl">2</span><span class="op">*</span>nominalresult.vm0<span class="op">^</span><span class="fl">2</span> <span class="op">+</span> <span class="fu">sum</span>(nominalresult.steps.Pwork), <span class="fl">1</span><span class="op">/</span><span class="fl">2</span><span class="op">*</span>minvarresult.vm0<span class="op">^</span><span class="fl">2</span> <span class="op">+</span> <span class="fu">sum</span>(minvarresult.steps.Pwork), <span class="fl">1</span><span class="op">/</span><span class="fl">2</span><span class="op">*</span>constaccelresult.vm0<span class="op">^</span><span class="fl">2</span> <span class="op">+</span> <span class="fu">sum</span>(constaccelresult.steps.Pwork)]</span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a><span class="fu">bar</span>(threecosts,xticks<span class="op">=</span>((<span class="fl">1</span>,<span class="fl">2</span>,<span class="fl">3</span>),(<span class="st">"Energy-Time"</span>, <span class="st">"Steady min-COT"</span>, <span class="st">"Steady accel"</span>)),legend<span class="op">=</span><span class="cn">false</span>,ylabel<span class="op">=</span><span class="st">"Total work"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display" data-execution_count="5">
<p><img src="shortwalks_files/figure-html/cell-5-output-1.svg" class="img-fluid"></p>
</div>
</div>
<div class="cell" data-execution_count="5">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="im">using</span> <span class="bu">Markdown</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>Markdown.<span class="fu">parse</span>(<span class="st">"""</span></span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a><span class="st">The energy-time work is </span><span class="sc">$</span>(threecosts[<span class="fl">1</span>])<span class="st">. </span></span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a><span class="st">The min-COT work is </span><span class="sc">$</span>(threecosts[<span class="fl">2</span>])<span class="st">.</span></span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a><span class="st">The const accel work is </span><span class="sc">$</span>(threecosts[<span class="fl">3</span>])<span class="st">.</span></span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a><span class="st">Minimization of cost of transport is not energetically optimal, because it is less costly to vary speed dynamically. In particular, the fast speed-up of minCOT is very costly. </span></span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a><span class="st">"""</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display" data-execution_count="6">
<p>The energy-time work is 0.21077394712113307. The min-COT work is 0.23455721768541665. The const accel work is 0.2752584233181397.</p>
<p>Minimization of cost of transport is not energetically optimal, because it is less costly to vary speed dynamically. In particular, the fast speed-up of minCOT is very costly.</p>
</div>
</div>
</section>
<section id="julia-code" class="level1">
<h1>Julia code</h1>
<p>This page is viewable as <a href="shortwalks.ipynb">Jupyter notebook</a>, <a href="shortwalks.jl">plain Julia</a> text, or <a href="shortwalks.html">HTML</a>.</p>
<section id="references" class="level2">


</section>
</section>

<div id="quarto-appendix" class="default"><section class="quarto-appendix-contents" role="doc-bibliography"><h2 class="anchored quarto-appendix-heading">References</h2><div id="refs" class="references csl-bib-body hanging-indent" role="doc-bibliography">
<div id="ref-carlisle2022OptimizationEnergyTime" class="csl-entry" role="doc-biblioentry">
Carlisle, R. Elizabeth, and Arthur D. Kuo. 2022. <span>“Optimization of Energy and Time Predicts Dynamic Speeds for Human Walking.”</span> <span>bioRxiv</span>. <a href="https://doi.org/10.1101/2022.07.15.500158">https://doi.org/10.1101/2022.07.15.500158</a>.
</div>
</div></section></div></main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    setTimeout(function() {
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const cites = ref.parentNode.getAttribute('data-cites').split(' ');
    tippyHover(ref, function() {
      var popup = window.document.createElement('div');
      cites.forEach(function(cite) {
        var citeDiv = window.document.createElement('div');
        citeDiv.classList.add('hanging-indent');
        citeDiv.classList.add('csl-entry');
        var biblioDiv = window.document.getElementById('ref-' + cite);
        if (biblioDiv) {
          citeDiv.innerHTML = biblioDiv.innerHTML;
        }
        popup.appendChild(citeDiv);
      });
      return popup.innerHTML;
    });
  }
});
</script>
</div> <!-- /content -->



</body></html>